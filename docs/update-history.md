# HMoneta 项目升级历史

### 🚀 关键里程碑详情

| 📅 日期           | 🎯 版本           | 🏷️ 主题  | 🔑 核心特性                                  |
|-----------------|-----------------|---------|------------------------------------------|
| **2026年1月6日**   | V0.0.1-Beta1    | 架构优化    | API接口统一化、悬浮按钮优化、代码重构、用户体验提升              |
| **2025年12月31日** | V0.0.1-Alpha2   | UI/UX升级 | 现代化登录界面、悬浮按钮交互、背景透明设计、夜晚模式优化             |
| **2025年12月11日** | V0.0.1-Alpha    | 功能完善    | 证书有效期管理、证书下载、敏感字段过滤、MDC日志追踪、异步处理机制       |
| **2025年11月**    | V0.0.1-SNAPSHOT | 基础架构    | DDNS服务、插件系统、前端界面、用户认证、WebSocket日志、ACME协议 |

---

## 📋 更新详情

### V0.0.1-Beta1 (2026年1月6日)

#### 🔧 API接口优化

- **DNS分组管理统一化**: 将修改和删除操作合并到统一接口 `/hm/dns/modify_group`
- **简化API设计**: 提高接口的一致性和易用性
- **参数优化**: 通过 `isDelete` 参数控制操作类型，移除独立的删除分组端点
- **前端交互优化**: 统一处理分组修改和删除操作，使用单一 `submitModify` 函数

#### 🎨 前端交互优化

- **悬浮按钮模式**: 采用现代化悬浮按钮交互设计，提升操作体验
- **UI/UX改进**: 进一步优化界面交互设计，增强用户操作的直观性
- **视觉效果**: 改进按钮布局和视觉反馈
- **用户体验**: 持续优化界面交互体验

#### 🏗️ 代码重构

- **DNS服务优化**: 重构分组操作流程，提高代码可维护性
- **架构改进**: 重构分组操作逻辑，提升代码复用性
- **事务处理**: 优化数据库操作的事务处理机制
- **错误处理**: 改进服务层的错误处理机制

#### 📊 技术改进

- **代码质量**: 提升代码可维护性和可读性
- **性能优化**: 优化数据库操作和API响应
- **调试友好**: 改进错误日志和调试信息

---

### V0.0.1-Alpha2 (2025年12月31日)

#### 🎨 UI/UX 重大升级

- **现代化登录界面**: 全新重写登录界面，采用粒子效果背景和玻璃拟态设计
- **动画效果**: 实现现代化动画效果和响应式设计
- **用户体验**: 提供更优雅和用户友好的登录体验
- **视觉优化**: 优化视觉效果和交互反馈

#### 🎯 悬浮按钮交互

- **交互模式**: 使用悬浮按钮替换原本新增分组按钮
- **操作体验**: 提升用户操作体验和界面现代化程度
- **直观性**: 增强用户操作的直观性和便捷性
- **布局优化**: 改进按钮布局和视觉反馈

#### 🌙 UI体验优化

- **背景透明**: 将背景设置成透明，提升前端UI在夜晚模式的体验
- **主题适配**: 优化界面在不同主题模式下的视觉效果
- **夜晚模式**: 改善用户在夜晚环境下的使用体验
- **视觉一致性**: 提升整体视觉一致性和现代感

#### 🔐 认证流程优化

- **状态检查**: 在前端 main.js 中增加认证状态检查
- **流程优化**: 提升用户认证流程的用户体验
- **启动优化**: 优化应用启动时的认证状态管理
- **连贯性**: 改进用户体验流程的连贯性

---

### V0.0.1-Alpha (2025年12月11日)

#### 🎯 证书管理功能

- **证书有效期管理**: 自动存储证书有效期信息（notBefore/notAfter）
- **有效期展示**: 在DNS解析信息中展示证书有效期
- **API查询**: 提供证书有效期API查询接口
- **数据库存储**: 通过AcmeCertificationEntity的notBefore和notAfter字段管理证书有效期

#### 📦 证书下载功能

- **下载API**: 新增证书下载API：`GET /hm/acme/download-cert/{domain}`
- **ZIP打包**: 支持ZIP格式证书包下载
- **多格式支持**: 包含.key、.crt、.pem、.fullchain.pem等格式文件
- **完整功能**: 提供完整的证书链打包和下载功能

#### 🔒 安全机制增强

- **敏感字段过滤**: 通过@JwtExclude注解标记敏感字段，防止敏感信息泄露
- **JWT优化**: JWT工具类支持敏感字段过滤机制
- **密码安全**: 从BCrypt改为MD5加盐加密存储密码
- **系统安全**: 增强整体系统安全性

#### 📊 日志系统优化

- **MDC日志追踪**: 使用MDC（Mapped Diagnostic Context）实现日志ID追踪
- **调试支持**: 便于调试和问题定位
- **追踪ID**: 生成LOG_ID用于日志追踪
- **问题定位**: 提高问题排查效率

#### ⚡ 异步处理机制

- **异步证书申请**: 使用@Async注解实现异步证书申请
- **任务跟踪**: 通过AcmeAsyncLogEntity实体跟踪异步任务日志
- **实时推送**: 支持任务状态跟踪和实时推送
- **任务上下文**: 引入AcmeTaskContext任务上下文

#### 🔌 插件管理增强

- **ZIP上传**: 支持ZIP格式插件上传
- **版本管理**: 插件版本检查和自动更新数据库记录
- **插件系统**: 完善插件管理功能

#### 📡 WebSocket日志系统

- **按服务订阅**: 支持按服务订阅日志
- **全量订阅**: 支持订阅所有日志
- **心跳机制**: 实现ping/pong心跳机制
- **实时通信**: 完善WebSocket实时通信功能

#### 🛠️ ACME证书申请优化

- **重试机制**: 添加登录重试机制，最多重试3次
- **DNS传播验证**: 使用最多10次尝试验证，每次间隔10秒
- **自动清理**: 证书申请过程包含自动清理验证用DNS记录功能

#### 📊 数据库优化

- **连接池**: 修复了ACME证书申请过程中的数据库连接泄漏问题
- **异常处理**: 优化了异步任务中的数据库操作异常处理

#### 🔧 异常处理增强

- **网络异常**: 增强了ACME证书申请过程中的网络异常处理
- **挑战获取**: 添加了ACME挑战获取的异常处理机制

#### 📋 JSON处理库变更

- **工具库**: 使用tools.jackson进行JSON处理，替代标准的com.fasterxml.jackson

#### ⚙️ 定时任务优化

- **环境控制**: DNS更新任务仅在非开发环境运行（@Profile("!dev")）
- **线程命名**: 任务线程池使用HMScheduling-前缀命名

---

### V0.0.1-SNAPSHOT (2025年11月)

#### 🏗️ 基础架构

- **DDNS服务**: 基础DNS动态更新服务 (DDNS)
- **插件系统**: 支持多种DNS提供商（通过插件系统）
- **前端界面**: 前端Web管理界面 (Vue 3 + Vuetify)
- **用户认证**: JWT用户认证系统

#### 🌐 核心功能

- **实时日志**: WebSocket实时日志推送
- **证书管理**: ACME协议支持（SSL证书自动申请和管理）
- **多DNS支持**: 插件系统支持多种DNS服务提供商
- **管理界面**: 完整的前端管理界面

#### 📱 技术栈

- **后端框架**: Spring Boot + Java
- **前端框架**: Vue 3 + Vuetify
- **数据库**: PostgreSQL
- **构建工具**: Maven + Vite
- **包管理**: Yarn

---

**🚀 项目持续发展中，每个版本都在不断优化和完善用户体验！**

**当前版本**: V0.0.1-Beta1 (2026年1月6日)
**下一步计划**: 准备正式Release版本